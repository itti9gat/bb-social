"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[237],{4848:function(e,s,r){r.d(s,{Z:function(){return t}});var n=r(5893),l=r(7294),a=r(495),i=r(4053);function t(e){let{url:s,size:r,editable:t,fetchData:o}=e,[d,c]=(0,l.useState)(!1),u=(0,i.useSupabaseClient)(),h=(0,i.useSession)(),x="w-12 h-12";async function m(e){await u.from("profiles").update({avatar:e}).eq("id",h.user.id).then(e=>{if(e.error)throw e.error;o&&o()})}async function v(e){let s=e.target.files;if(s.length>0){for(let e of(c(!0),s)){let s=Date.now()+e.name;await u.storage.from("profiles").upload(s,e).then(e=>{if(e.data){let s="https://xcsvoeiuobfilsxfigvr.supabase.co/storage/v1/object/public/profiles/"+e.data.path;m(s)}})}c(!1)}}return"lg"===r&&(x="w-24 h-24"),(0,n.jsxs)("div",{className:"".concat(x," relative"),children:[(0,n.jsx)("div",{className:"".concat(x," flex rounded-full overflow-hidden shadow-md"),children:(0,n.jsx)("img",{src:s,referrerPolicy:"no-referrer"})}),d&&(0,n.jsx)("div",{className:"absolute inset-0 flex items-center bg-white opacity-70 rounded-full",children:(0,n.jsx)("div",{className:"mx-auto",children:(0,n.jsx)(a.Z,{})})}),t&&(0,n.jsx)("div",{className:"absolute bottom-0 -right-1 bg-gray-50 rounded-full p-1 shadow-lg hander",children:(0,n.jsxs)("label",{className:"bg-red-300 cursor-pointer",children:[(0,n.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-6 h-6",children:[(0,n.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6.827 6.175A2.31 2.31 0 015.186 7.23c-.38.054-.757.112-1.134.175C2.999 7.58 2.25 8.507 2.25 9.574V18a2.25 2.25 0 002.25 2.25h15A2.25 2.25 0 0021.75 18V9.574c0-1.067-.75-1.994-1.802-2.169a47.865 47.865 0 00-1.134-.175 2.31 2.31 0 01-1.64-1.055l-.822-1.316a2.192 2.192 0 00-1.736-1.039 48.774 48.774 0 00-5.232 0 2.192 2.192 0 00-1.736 1.039l-.821 1.316z"}),(0,n.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M16.5 12.75a4.5 4.5 0 11-9 0 4.5 4.5 0 019 0zM18.75 10.5h.008v.008h-.008V10.5z"})]}),(0,n.jsx)("input",{type:"file",className:"hidden",onChange:v})]})})]})}},3533:function(e,s,r){r.d(s,{Z:function(){return l}});var n=r(5893);function l(e){let{children:s,noPadding:r}=e,l="p-3";return r&&(l=""),(0,n.jsx)("div",{className:"bg-white shadow-md mb-3 rounded-md ".concat(l),children:s})}},7844:function(e,s,r){r.d(s,{Z:function(){return h}});var n=r(5893),l=r(3533),a=r(1403),i=r(4053),t=r(1664),o=r.n(t),d=r(1163),c=r(7294);function u(){let e="flex gap-3 py-3 px-5 font-normal bg-blue-500 text-white -mx-5 px-5 rounded-md shadow-md",s="flex text-blue-500 gap-3 py-2 hover:bg-blue-100 rounded-md my-2 -mx-5 px-5",{pathname:r,push:t}=(0,d.useRouter)(),u=(0,i.useSupabaseClient)(),h=async()=>{await u.auth.signOut(),t("/")},{profile:x}=(0,c.useContext)(a.S);return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)(l.Z,{children:[(0,n.jsx)("h2",{className:"py-3 px-2 font-semibold",children:"Navigation"}),(0,n.jsxs)(o(),{href:"/",className:"/"===r?e:s,children:[(0,n.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-6 h-6",children:(0,n.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 12l8.954-8.955c.44-.439 1.152-.439 1.591 0L21.75 12M4.5 9.75v10.125c0 .621.504 1.125 1.125 1.125H9.75v-4.875c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125V21h4.125c.621 0 1.125-.504 1.125-1.125V9.75M8.25 21h8.25"})}),"Home"]}),(0,n.jsxs)(o(),{href:"/profile/".concat(null==x?void 0:x.id),className:r.indexOf("profile")>0?e:s,children:[(0,n.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-6 h-6",children:(0,n.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 6a3.75 3.75 0 11-7.5 0 3.75 3.75 0 017.5 0zM4.501 20.118a7.5 7.5 0 0114.998 0A17.933 17.933 0 0112 21.75c-2.676 0-5.216-.584-7.499-1.632z"})}),"Profile"]}),(0,n.jsx)("button",{onClick:h,className:"w-full",children:(0,n.jsxs)("span",{className:s,children:[(0,n.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-6 h-6",children:(0,n.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 9V5.25A2.25 2.25 0 0013.5 3h-6a2.25 2.25 0 00-2.25 2.25v13.5A2.25 2.25 0 007.5 21h6a2.25 2.25 0 002.25-2.25V15M12 9l-3 3m0 0l3 3m-3-3h12.75"})}),"Logout"]})})]}),(0,n.jsx)(l.Z,{children:(0,n.jsxs)("div",{children:[(0,n.jsx)("img",{className:"-mt-3",src:"https://blogger.googleusercontent.com/img/a/AVvXsEjO0pinCN8SoAcCG9aD6yt4u1Q3hfqx5x-92ANuKkZycLoLP157vS8sNiLJkB4-f2vohOP8vp9Z8ZkG2cAOcrvFzoWvy1rdxXr2zw7Cur1QgFiLboIZAaehcWgex3oUm2veYeP_WGKnrPxGhw-JunK_jFcsV7KiWMhBxC96LK17RgBBOALWu2EDBYKk"}),(0,n.jsx)("img",{className:"-mt-9",src:"https://www.vectorlogo.zone/logos/tailwindcss/tailwindcss-ar21.png"}),(0,n.jsx)("img",{className:"pt-3 h-14 mb-10 mx-auto",src:"https://raw.githubusercontent.com/supabase/supabase/master/packages/common/assets/images/supabase-logo-wordmark--light.svg"})]})})]})}function h(e){let{children:s}=e;return(0,n.jsxs)("div",{className:"flex max-w-screen-lg mx-auto gap-8 pt-3",children:[(0,n.jsx)("div",{className:"w-1/3",children:(0,n.jsx)(u,{})}),(0,n.jsx)("div",{className:"w-2/3",children:s})]})}},495:function(e,s,r){r.d(s,{Z:function(){return a}});var n=r(5893),l=r(9546);function a(){return(0,n.jsx)("div",{children:(0,n.jsx)(l.Z,{className:"py-2",color:"#36d7b7",speedMultiplier:2})})}},1417:function(e,s,r){r.d(s,{Z:function(){return u}});var n=r(5893),l=r(4848),a=r(3533),i=r(7294),t=r(1664),o=r.n(t),d=r(595),c=r(4053);function u(e){let{id:s,content:r,author:t,photos:u,created_at:h,profiles:x,myProfile:m}=e,v=(0,c.useSupabaseClient)(),[p,f]=(0,i.useState)(""),[g,j]=(0,i.useState)([]),[w,N]=(0,i.useState)([]),b=()=>{v.from("comment").select("id, comment, created_at, profiles(id, name, avatar)").eq("post_id",s).order("created_at",{ascending:!0}).then(e=>{var s;(null==e?void 0:null===(s=e.data)||void 0===s?void 0:s.length)&&N(e.data)})},k=()=>{v.from("lovepost").select().eq("post_id",s).then(e=>{j(e.data)})},C=()=>{""!==r&&v.from("comment").insert({post_id:s,user_id:m.id,comment:p}).then(e=>{e.error||(f(""),b())})},y=!!g.find(e=>e.user_id===(null==m?void 0:m.id)),L=()=>{if(y){v.from("lovepost").delete().eq("post_id",s).eq("user_id",m.id).then(()=>{k()});return}v.from("lovepost").insert({post_id:s,user_id:m.id}).then(e=>{e.error||k()})};return(0,i.useEffect)(()=>{b(),k()},[null==x?void 0:x.avatar,null==x?void 0:x.name]),(0,n.jsxs)(a.Z,{children:[(0,n.jsx)("div",{children:(0,n.jsxs)("div",{className:"flex gap-3",children:[(0,n.jsx)(o(),{className:"cursor-pointer",href:"/profile/".concat(t),children:(0,n.jsx)(l.Z,{url:null==x?void 0:x.avatar})}),(0,n.jsxs)("div",{children:[(0,n.jsxs)("div",{className:"flex gap-2",children:[(0,n.jsx)("div",{children:(0,n.jsx)(o(),{className:"hover:underline cursor-pointer font-semibold",href:"/profile/".concat(t),children:null==x?void 0:x.name})}),(0,n.jsx)("div",{children:"shared a post"})]}),(0,n.jsx)("div",{className:"text-sm text-gray-400",children:(0,n.jsx)(d.Z,{date:new Date(h).getTime()})})]})]})}),(0,n.jsx)("div",{className:"py-3",children:r}),(null==u?void 0:u.length)>0&&(0,n.jsx)("div",{className:"flex gap-2",children:u.map((e,s)=>(0,n.jsx)("div",{children:(0,n.jsx)("img",{src:e,alt:"",className:"rounded-md overflow-hidden w-auto h-60"})},s))}),(0,n.jsxs)("div",{className:"flex pt-4 gap-5",children:[(0,n.jsxs)("div",{className:"flex gap-1",children:[y&&(0,n.jsx)("span",{className:"text-red-600 hover:cursor-pointer",onClick:L,children:(0,n.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",className:"w-6 h-6",children:(0,n.jsx)("path",{d:"M11.645 20.91l-.007-.003-.022-.012a15.247 15.247 0 01-.383-.218 25.18 25.18 0 01-4.244-3.17C4.688 15.36 2.25 12.174 2.25 8.25 2.25 5.322 4.714 3 7.688 3A5.5 5.5 0 0112 5.052 5.5 5.5 0 0116.313 3c2.973 0 5.437 2.322 5.437 5.25 0 3.925-2.438 7.111-4.739 9.256a25.175 25.175 0 01-4.244 3.17 15.247 15.247 0 01-.383.219l-.022.012-.007.004-.003.001a.752.752 0 01-.704 0l-.003-.001z"})})}),!y&&(0,n.jsx)("span",{className:"hover:cursor-pointer",onClick:L,children:(0,n.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-6 h-6",children:(0,n.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21 8.25c0-2.485-2.099-4.5-4.688-4.5-1.935 0-3.597 1.126-4.312 2.733-.715-1.607-2.377-2.733-4.313-2.733C5.1 3.75 3 5.765 3 8.25c0 7.22 9 12 9 12s9-4.78 9-12z"})})}),(0,n.jsx)("span",{children:null==g?void 0:g.length})]}),(0,n.jsxs)("div",{className:"flex gap-1",children:[(0,n.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",className:"w-6 h-6",children:(0,n.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8.625 9.75a.375.375 0 11-.75 0 .375.375 0 01.75 0zm0 0H8.25m4.125 0a.375.375 0 11-.75 0 .375.375 0 01.75 0zm0 0H12m4.125 0a.375.375 0 11-.75 0 .375.375 0 01.75 0zm0 0h-.375m-13.5 3.01c0 1.6 1.123 2.994 2.707 3.227 1.087.16 2.185.283 3.293.369V21l4.184-4.183a1.14 1.14 0 01.778-.332 48.294 48.294 0 005.83-.498c1.585-.233 2.708-1.626 2.708-3.228V6.741c0-1.602-1.123-2.995-2.707-3.228A48.394 48.394 0 0012 3c-2.392 0-4.744.175-7.043.513C3.373 3.746 2.25 5.14 2.25 6.741v6.018z"})}),(0,n.jsx)("span",{children:null==w?void 0:w.length})]})]}),(null==w?void 0:w.length)>0&&(0,n.jsx)("div",{className:"mt-4",children:w.map((e,s)=>{var r,a,i;return(0,n.jsxs)("div",{className:"flex items-center gap-2 py-3",children:[(0,n.jsx)(l.Z,{url:null==e?void 0:null===(r=e.profiles)||void 0===r?void 0:r.avatar}),(0,n.jsxs)("div",{className:"bg-gray-200 p-2 px-4 rounded-3xl",children:[(0,n.jsxs)("div",{className:"flex gap-2 items-center",children:[(0,n.jsx)(o(),{href:"/profile/".concat(null==e?void 0:null===(a=e.profiles)||void 0===a?void 0:a.id),className:"font-semibold hover:underline",children:null==e?void 0:null===(i=e.profiles)||void 0===i?void 0:i.name}),(0,n.jsx)(d.Z,{className:"text-sm text-gray-400",date:new Date(e.created_at).getTime()})]}),(0,n.jsx)("div",{children:null==e?void 0:e.comment})]})]},s)})}),(0,n.jsxs)("div",{className:"flex gap-2 py-5",children:[(0,n.jsx)(l.Z,{url:null==m?void 0:m.avatar}),(0,n.jsx)("textarea",{value:p,onChange:e=>f(e.target.value),className:"grow p-2 border-gray-100 border-2 rounded-xl",placeholder:"Write a comment ..."})]}),(0,n.jsxs)("div",{className:"flex justify-between",children:[(0,n.jsx)("div",{className:"flex gap-2"}),(0,n.jsx)("button",{onClick:C,className:"bg-blue-500 px-3 py-1 text-white rounded-md",children:"Comment"})]})]})}},1403:function(e,s,r){r.d(s,{S:function(){return i},f:function(){return t}});var n=r(5893),l=r(4053),a=r(7294);let i=(0,a.createContext)({});function t(e){var s;let{children:r}=e,t=(0,l.useSession)(),o=(0,l.useSupabaseClient)(),[d,c]=(0,a.useState)(null);return(0,a.useEffect)(()=>{var e;(null==t?void 0:null===(e=t.user)||void 0===e?void 0:e.id)&&o.from("profiles").select().eq("id",t.user.id).then(e=>{var s;c(null===(s=e.data)||void 0===s?void 0:s[0])})},[null==t?void 0:null===(s=t.user)||void 0===s?void 0:s.id]),(0,n.jsx)(i.Provider,{value:{profile:d},children:r})}}}]);